<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NDS Wood Member Design Checker</title>    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <script>
        // This script is in shared-utils.js, but needs to run early to prevent FOUC.
        (function() {
            const isDark = localStorage.getItem('color-theme') === 'dark' || (!('color-theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches);
            document.documentElement.classList.toggle('dark', isDark);
        })();
    </script>
    <link rel="stylesheet" href="../styles.min.css">
    <script src="../js/template.js" defer></script>
    <script src="../js/validation-rules.js" defer></script>
    <script src="../js/shared-utils.js" defer></script>
    <script src="nds wood design.js" defer></script>
</head>
<body class="bg-gray-50 text-gray-800 dark:bg-gray-900 dark:text-gray-300">

    <div class="container mx-auto p-4 md:p-8 max-w-7xl">
        <div id="header-placeholder" style="min-height: 110px;"></div>

        <main id="wood-checker-form" class="space-y-8">
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                <!-- Column 1: General & Material -->
                <div>
                    <div class="form-section">
                        <h2>General Parameters</h2>
                        <div class="space-y-4">
                            <div>
                                <label class="block text-sm font-medium mb-1">Design Method</label>
                                <input type="text" id="design_method" value="ASD" class="w-full p-2 bg-gray-100 dark:bg-gray-800 rounded-md" readonly>
                            </div>
                            <div>
                                <label class="block text-sm font-medium mb-1">Unit System</label>
                                <input type="text" id="unit_system" value="Imperial" class="w-full p-2 bg-gray-100 dark:bg-gray-800 rounded-md" readonly>
                            </div>
                        </div>
                    </div>
                    <div class="form-section">
                        <h2>Wood Species & Grade</h2>
                         <p class="text-xs mb-2">Unadjusted values from NDS Supplement.</p>
                        <div class="grid grid-cols-2 gap-4">
                            <div><label for="Fb_unadjusted" class="block text-sm">Fb (psi)</label><input type="number" id="Fb_unadjusted" value="975"></div>
                            <div><label for="Fv_unadjusted" class="block text-sm">Fv (psi)</label><input type="number" id="Fv_unadjusted" value="150"></div>
                            <div><label for="Fc_perp_unadjusted" class="block text-sm">Fc⊥ (psi)</label><input type="number" id="Fc_perp_unadjusted" value="405"></div>
                            <div><label for="Fc_unadjusted" class="block text-sm">Fc (psi)</label><input type="number" id="Fc_unadjusted" value="1550"></div>
                            <div><label for="E_unadjusted" class="block text-sm">E (psi)</label><input type="number" id="E_unadjusted" value="1300000"></div>
                            <div><label for="E_min_unadjusted" class="block text-sm">E_min (psi)</label><input type="number" id="E_min_unadjusted" value="470000"></div>
                        </div>
                    </div>
                </div>
                <div>
                    <div class="form-section">
                            <h2>Member Properties</h2>
                            <div class="grid grid-cols-2 gap-4">
                                <div><label for="b_width" class="block text-sm">Width (b, in)</label><input type="number" id="b_width" value="1.5"></div>
                                <div><label for="d_depth" class="block text-sm">Depth (d, in)</label><input type="number" id="d_depth" value="2.5"></div>
                                <div><label for="unbraced_length_L" class="block text-sm">Unbraced L (ft)</label><input type="number" id="unbraced_length_L" value="3.5"></div>
                                <div><label for="effective_length_factor_K" class="block text-sm">K Factor</label><input type="number" id="effective_length_factor_K" value="1.0"></div>
                                <div><label for="bearing_length_Lb" class="block text-sm">Bearing Lb (in)</label><input type="number" id="bearing_length_Lb" value="1.5"></div>
                        </div>
                    </div>
                    <div class="form-section">
                        <h2>Adjustment Conditions</h2>
                        <div class="space-y-4">
                            <div>
                                <label for="load_duration" class="block text-sm font-medium mb-1">Load Duration</label>
                                <select id="load_duration">
                                    <option value="0.9">Permanent (0.9)</option>
                                    <option value="1.0">Ten years (1.0)</option>
                                    <option value="1.15" selected>Two months (1.15)</option>
                                    <option value="1.25">Seven days (1.25)</option>
                                    <option value="1.6">Ten minutes (1.6)</option>
                                    <option value="2.0">Impact (2.0)</option>
                                </select>
                            </div>
                            <div>
                                <label for="wet_service" class="block text-sm font-medium mb-1">Wet Service</label>
                                <select id="wet_service">
                                    <option value="Dry (MC <= 19%)" selected>Dry (MC <= 19%)</option>
                                    <option value="Wet (MC > 19%)">Wet (MC > 19%)</option>
                                </select>
                            </div>
                             <div>
                                <label for="temperature" class="block text-sm font-medium mb-1">Temperature</label>
                                <select id="temperature">
                                    <option value="low" selected>T &lt;= 100°F</option>
                                    <option value="medium">100°F &lt; T &lt;= 125°F</option>
                                    <option value="high">125°F &lt; T &lt;= 150°F</option>
                                </select>
                            </div>
                            <div>
                                 <label for="flat_use" class="block text-sm font-medium mb-1">Bending Axis</label>
                                 <select id="flat_use" data-ui-toggle-controller data-ui-toggle-target="#repetitive-member-container" data-ui-toggle-condition-value="Strong Axis">
                                     <option value="Strong Axis" selected>Strong Axis</option>
                                     <option value="Weak Axis">Weak Axis</option>
                                 </select>
                             </div>
                             <div><label for="incising" class="block text-sm font-medium mb-1">Incising</label><select id="incising"><option value="No" selected>No</option><option value="Yes">Yes</option></select></div>
                             <div id="repetitive-member-container"><label for="repetitive_member" class="block text-sm font-medium mb-1">Repetitive Member</label><select id="repetitive_member"><option value="No" selected>No</option><option value="Yes">Yes</option></select></div>
                        </div>
                    </div>
                </div>
                <div>
                    <div class="form-section">
                        <h2>Applied Loads (ASD)</h2>
                        <div class="space-y-4">
                            <div><label for="axial_load_P" class="block text-sm">Axial (kips)</label><input type="number" id="axial_load_P" value="0"></div>
                            <div><label for="moment_load_M" class="block text-sm">Moment (kip-ft)</label><input type="number" id="moment_load_M" value="0.05"></div>
                            <div><label for="shear_load_V" class="block text-sm">Shear (kips)</label><input type="number" id="shear_load_V" value="0.04"></div>
                        </div>
                    </div>
                    <div class="form-section">
                        <h2>Serviceability (Deflection)</h2>
                        <div class="space-y-4">
                            <div><label for="deflection_span" class="block text-sm">Span for Deflection (ft)</label><input type="number" id="deflection_span" value="3.5"></div>
                            <div><label for="deflection_limit" class="block text-sm">Deflection Limit (e.g., 360 for L/360)</label><input type="number" id="deflection_limit" value="360"></div>
                            <div><label for="actual_deflection" class="block text-sm">Actual Deflection (in)</label><input type="number" id="actual_deflection" value="0.1"></div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="flex justify-center items-center gap-4 flex-wrap">
                <button id="load-inputs-btn" class="bg-gray-500 text-white font-bold py-3 px-6 rounded-lg hover:bg-gray-600">Load Inputs</button>
                <button id="save-inputs-btn" class="bg-green-600 text-white font-bold py-3 px-6 rounded-lg hover:bg-green-700">Save Inputs</button>
                <span id="file-name-display" class="text-sm text-gray-500 dark:text-gray-400"></span>
                <input type="file" id="file-input" class="hidden" accept=".txt">
                <button id="run-wood-check-btn" class="bg-blue-600 text-white font-bold py-3 px-8 rounded-lg hover:bg-blue-700">Run Wood Check</button>
            </div>
        </main>

        <div id="wood-results-container" class="mt-10 results-container"></div>
        <div id="feedback-message" class="text-center mt-2 text-sm h-5"></div>
        <div id="footer-placeholder"></div>
    </div>
</body>
</html>
