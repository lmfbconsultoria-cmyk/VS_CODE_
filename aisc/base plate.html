<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AISC Base Plate Design Checker</title>    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <script>
        // This script is in shared-utils.js, but needs to run early to prevent FOUC.
        (function() {
            const isDark = localStorage.getItem('color-theme') === 'dark' || (!('color-theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches);
            document.documentElement.classList.toggle('dark', isDark);
        })();
    </script>
    <link rel="stylesheet" href="../styles.min.css">
    <link rel="stylesheet" href="../styles.min.css">
    <script src="../js/template.js" defer></script>
    <script src="../js/validation-rules.js" defer></script>
    <script src="../js/shared-utils.js" defer></script>
    <script src="base plate.js" defer></script>
</head>
<body class="bg-gray-50 dark:bg-gray-900">

    <div class="container mx-auto p-4 md:p-8 max-w-7xl">
        <div id="header-placeholder" style="min-height: 110px;"></div>

        <main id="baseplate-checker-form">
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                <div class="lg:col-span-1 space-y-6">
                    <div>
                        <div class="form-section">
                        <h2>General Parameters</h2>
                        <div class="space-y-4">
                            <div>
                                <label for="design_method" class="block text-sm font-medium mb-1">Design Method</label>
                                <select id="design_method">
                                    <option value="LRFD">LRFD</option>
                                    <option value="ASD" selected>ASD</option>
                                </select>
                            </div>
                             <div>
                                <label for="design_code" class="block text-sm font-medium mb-1">Design Code</label>
                                <input type="text" id="design_code" value="AISC 360-16 / ACI 318-19" class="w-full p-2 bg-gray-100 dark:bg-gray-800 rounded-md" readonly>
                            </div>
                            <div>
                                <label for="unit_system" class="block text-sm font-medium mb-1">Unit System</label>
                                <select id="unit_system">
                                    <option value="Imperial" selected>Imperial (ksi, in, ft)</option>
                                    <option value="Metric">Metric (MPa, mm, m)</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    </div>
                    <div>
                        <div class="form-section">
                            <h2>Material Properties</h2>
                        <div class="grid grid-cols-2 gap-4">
                            <div><label for="base_plate_Fy" class="block text-sm">Plate Fy</label><input type="number" id="base_plate_Fy" value="36"></div>
                            <div><label for="concrete_fc" class="block text-sm">Concrete f'c</label><input type="number" id="concrete_fc" value="4"></div>
                            <div><label for="anchor_bolt_Fut" class="block text-sm">Bolt Fut</label><input type="number" id="anchor_bolt_Fut" value="58"></div>
                            <div><label for="anchor_bolt_Fnv" class="block text-sm">Bolt Fnv</label><input type="number" id="anchor_bolt_Fnv" value="22"></div>
                             <div><label for="weld_Fexx" class="block text-sm">Weld Fexx</label><input type="number" id="weld_Fexx" value="70"></div>
                        </div>
                    </div>
                    </div>
                    <div>
                        <div class="form-section">
                            <h2>Geometric Properties</h2>
                        <div class="grid grid-cols-2 gap-4">
                            <div><label for="base_plate_length_N" class="block text-sm">Plate N</label><input type="number" id="base_plate_length_N" value="8"></div>
                            <div><label for="base_plate_width_B" class="block text-sm">Plate B</label><input type="number" id="base_plate_width_B" value="8"></div>
                            <div><label for="provided_plate_thickness_tp" class="block text-sm">Plate t_p</label><input type="number" id="provided_plate_thickness_tp" value="0.5"></div>
                             <div><label for="column_depth_d" class="block text-sm">Column d</label><input type="number" id="column_depth_d" value="3.5"></div>
                            <div><label for="column_flange_width_bf" class="block text-sm">Column bf</label><input type="number" id="column_flange_width_bf" value="3.5"></div>
                            <div>
                                <label for="column_type" class="block text-sm font-medium mb-1">Column Type</label>
                                <select id="column_type">
                                    <option value="Wide Flange">Wide Flange</option>
                                    <option value="Round HSS" selected>Round HSS</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    </div>
                    <div>
                        <div class="form-section">
                            <h2>Anchor Bolt Properties</h2>
                         <div class="grid grid-cols-2 gap-4">
                             <div><label for="anchor_bolt_diameter" class="block text-sm">Diameter</label><input type="number" id="anchor_bolt_diameter" value="0.375"></div>
                            <div><label for="anchor_embedment_hef" class="block text-sm">h_ef</label><input type="number" id="anchor_embedment_hef" value="2.88"></div>
                            <div><label for="num_bolts_total" class="block text-sm">Total Bolts</label><input type="number" id="num_bolts_total" value="4"></div>
                            <div><label for="num_bolts_tension_row" class="block text-sm">Tension Row</label><input type="number" id="num_bolts_tension_row" value="2"></div>
                            <div><label for="bolt_spacing_N" class="block text-sm">Spacing (N)</label><input type="number" id="bolt_spacing_N" value="3"></div>
                            <div><label for="bolt_spacing_B" class="block text-sm">Spacing (B)</label><input type="number" id="bolt_spacing_B" value="3"></div>
                            <div>
                                <label for="bolt_type" class="block text-sm font-medium mb-1">Bolt Type</label>
                                <select id="bolt_type">
                                    <option>Cast-in</option>
                                    <option selected>Post-installed</option>
                                </select>
                            </div>
                             <div>
                                <label for="weld_size" class="block text-sm font-medium mb-1">Weld Size</label>
                                <input type="number" id="weld_size" value="0.25">
                             </div>
                         </div>
                    </div>
                    </div>
                    <div>
                        <div class="form-section">
                            <h2>Applied Loads</h2>
                        <div class="space-y-4">
                            <div><label for="axial_load_P_in" class="block text-sm">Axial (P)</label><input type="number" id="axial_load_P_in" value="-3"></div>
                            <div><label for="moment_M_in" class="block text-sm">Moment (M)</label><input type="number" id="moment_M_in" value="0.5"></div>
                            <div><label for="shear_V_in" class="block text-sm">Shear (V)</label><input type="number" id="shear_V_in" value="3"></div>
                        </div>
                    </div>
                    </div>
                    <div>
                        <div class="form-section">
                            <h2>Analysis Options</h2>
                         <div class="space-y-4">
                              <div>
                                 <label for="assume_cracked_concrete" class="block text-sm font-medium mb-1">Concrete Condition</label>
                                 <select id="assume_cracked_concrete">
                                     <option value="true" selected>Cracked Concrete</option>
                                     <option value="false">Uncracked Concrete</option>
                                 </select>
                             </div>
                         </div>
                    </div>
                    </div>
                </div>
                <div class="lg:col-span-2">
                    <div class="form-section sticky top-4">
                        <h2>Base Plate Diagram</h2>
                        <div class="diagram">
                            <svg id="baseplate-diagram" viewBox="0 0 400 300" class="w-full h-auto" xmlns="http://www.w3.org/2000/svg"></svg>
                        </div>
                    </div>
                </div>
            </div>
             <div class="lg:col-span-3 mt-8 flex justify-center items-center gap-4 flex-wrap">
                 <button id="load-inputs-btn" class="bg-gray-500 text-white font-bold py-3 px-6 rounded-lg hover:bg-gray-600">Load Inputs</button>
                <button id="save-inputs-btn" class="bg-green-600 text-white font-bold py-3 px-6 rounded-lg hover:bg-green-700">Save Inputs</button>
                <span id="file-name-display" class="text-sm text-gray-500 dark:text-gray-400"></span>
                <input type="file" id="file-input" class="hidden" accept=".txt,.json">
                 <button id="run-steel-check-btn" class="bg-blue-600 text-white font-bold py-3 px-8 rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-4 focus:ring-blue-300 transition-all duration-300 transform hover:scale-105">Run Base Plate Check</button>
            </div>
        </main>

        <div id="feedback-message" class="text-center mt-2 text-sm h-5"></div>
        <div id="steel-results-container" class="mt-10 results-container"></div>

        <div id="footer-placeholder"></div>
    </div>
</body>
</html>
